{
  "version": "Windows Monitor Client",
  "app_version": "1.0",
  "api_endpoints": {
    "screenshot": "/webapi.php",
    "events": "/eventhandler.php"
  },
  "configuration": {
    "settings_file": "settings.ini",
    "default_intervals": {
      "screenshot": 5,
      "tic": 30,
      "history": 120,
      "keylog": 60,
      "usb": 30
    }
  },
  "api_requests": {
    "Screenshot": {
      "method": "POST",
      "content_type": "multipart/form-data",
      "endpoint": "/webapi.php",
      "parameters": {
        "fileToUpload": {
          "type": "file",
          "format": "JPEG image",
          "description": "Screenshot file captured from screen"
        },
        "Event": {
          "type": "string",
          "value": "Screenshot",
          "description": "Event type identifier"
        },
        "Version": {
          "type": "string",
          "value": "1.0",
          "description": "Application version"
        },
        "MacAddress": {
          "type": "string",
          "description": "Device MAC address (auto-detected)"
        },
        "Username": {
          "type": "string",
          "description": "Username from settings.ini or system"
        }
      },
      "response_handling": {
        "success_field": "Status",
        "success_value": "OK",
        "optional_fields": ["Interval"]
      }
    },
    "TicEvent": {
      "method": "POST",
      "content_type": "application/json",
      "endpoint": "/eventhandler.php",
      "parameters": {
        "Event": {
          "type": "string",
          "value": "Tic",
          "description": "Event type identifier"
        },
        "Version": {
          "type": "string",
          "value": "1.0",
          "description": "Application version"
        },
        "MacAddress": {
          "type": "string",
          "description": "Device MAC address (auto-detected)"
        },
        "Username": {
          "type": "string",
          "description": "Username from settings.ini or system"
        }
      },
      "response_handling": {
        "success_field": "Status",
        "success_value": "OK",
        "optional_fields": ["LastBrowserTic"]
      }
    },
    "BrowserHistory": {
      "method": "POST",
      "content_type": "application/json",
      "endpoint": "/eventhandler.php",
      "parameters": {
        "Event": {
          "type": "string",
          "value": "BrowserHistory",
          "description": "Event type identifier"
        },
        "Version": {
          "type": "string",
          "value": "1.0",
          "description": "Application version"
        },
        "MacAddress": {
          "type": "string",
          "description": "Device MAC address (auto-detected)"
        },
        "Username": {
          "type": "string",
          "description": "Username from settings.ini or system"
        },
        "BrowserHistories": {
          "type": "array",
          "description": "Array of browser history entries",
          "structure": [
            {
              "browser": {
                "type": "string",
                "description": "Browser name (Chrome, Firefox, Edge)"
              },
              "url": {
                "type": "string",
                "description": "Visited URL"
              },
              "title": {
                "type": "string",
                "description": "Page title"
              },
              "last_visit": {
                "type": "integer",
                "description": "Unix timestamp of last visit"
              },
              "date": {
                "type": "string",
                "description": "Formatted date (YYYY-MM-DD HH:MM:SS)"
              }
            }
          ]
        }
      },
      "response_handling": {
        "success_field": "Status",
        "success_value": "OK"
      }
    },
    "KeyLog": {
      "method": "POST",
      "content_type": "application/json",
      "endpoint": "/eventhandler.php",
      "parameters": {
        "Event": {
          "type": "string",
          "value": "KeyLog",
          "description": "Event type identifier"
        },
        "Version": {
          "type": "string",
          "value": "1.0",
          "description": "Application version"
        },
        "MacAddress": {
          "type": "string",
          "description": "Device MAC address (auto-detected)"
        },
        "Username": {
          "type": "string",
          "description": "Username from settings.ini or system"
        },
        "KeyLogs": {
          "type": "array",
          "description": "Array of key log entries",
          "structure": [
            {
              "date": {
                "type": "string",
                "description": "Formatted date (YYYY-MM-DD HH:MM:SS)"
              },
              "application": {
                "type": "string",
                "description": "Active window title/application name"
              },
              "key": {
                "type": "string",
                "description": "Key combination pressed"
              }
            }
          ]
        }
      },
      "response_handling": {
        "success_field": "Status",
        "success_value": "OK"
      }
    },
    "USBLog": {
      "method": "POST",
      "content_type": "application/json",
      "endpoint": "/eventhandler.php",
      "parameters": {
        "Event": {
          "type": "string",
          "value": "USBLog",
          "description": "Event type identifier"
        },
        "Version": {
          "type": "string",
          "value": "1.0",
          "description": "Application version"
        },
        "MacAddress": {
          "type": "string",
          "description": "Device MAC address (auto-detected)"
        },
        "Username": {
          "type": "string",
          "description": "Username from settings.ini or system"
        },
        "USBLogs": {
          "type": "array",
          "description": "Array of USB device log entries",
          "structure": [
            {
              "date": {
                "type": "string",
                "description": "Formatted date (YYYY-MM-DD HH:MM:SS)"
              },
              "device": {
                "type": "string",
                "description": "USB device name/description"
              },
              "action": {
                "type": "string",
                "description": "Device action (Connected, Disconnected)"
              }
            }
          ]
        }
      },
      "response_handling": {
        "success_field": "Status",
        "success_value": "OK"
      }
    }
  },
  "data_structures": {
    "BrowserHistoryEntry": {
      "date": "string",
      "url": "string",
      "title": "string"
    },
    "KeyLogEntry": {
      "date": "string",
      "application": "string",
      "key": "string"
    },
    "USBDeviceEntry": {
      "date": "string",
      "device": "string",
      "action": "string"
    },
    "ConnectionStatus": {
      "serverConnected": "boolean",
      "previousServerConnected": "boolean",
      "lastScreenshotStatus": "string",
      "lastTicStatus": "string",
      "lastHistoryStatus": "string",
      "lastKeyLogStatus": "string",
      "lastUSBLogStatus": "string",
      "lastError": "string",
      "lastSuccess": "timestamp"
    }
  },
  "browser_support": {
    "Chrome": {
      "database_path": "%LOCALAPPDATA%\\Google\\Chrome\\User Data\\Default\\History",
      "query": "SELECT url, title, last_visit_time FROM urls WHERE last_visit_time > ?"
    },
    "Firefox": {
      "database_path": "%APPDATA%\\Mozilla\\Firefox\\Profiles\\*.default-release\\places.sqlite",
      "query": "SELECT url, title, last_visit_date FROM moz_places WHERE last_visit_date > ?"
    },
    "Edge": {
      "database_path": "%LOCALAPPDATA%\\Microsoft\\Edge\\User Data\\Default\\History",
      "query": "SELECT url, title, last_visit_time FROM urls WHERE last_visit_time > ?"
    }
  },
  "monitoring_features": {
    "screenshot_capture": {
      "method": "GDI+ BitBlt",
      "format": "JPEG",
      "compression": "0.8",
      "temporary_storage": "system temp directory"
    },
    "keyboard_monitoring": {
      "method": "Windows Hook (WH_KEYBOARD_LL)",
      "capture_method": "Low-level keyboard hook",
      "key_mapping": "Virtual key codes to readable names"
    },
    "usb_monitoring": {
      "method": "Device Interface Notifications",
      "supported_devices": [
        "USB HUB",
        "USB Device",
        "Disk",
        "CDROM",
        "Keyboard",
        "Mouse"
      ]
    },
    "system_tray": {
      "features": [
        "Connection status indicator",
        "Context menu with status info",
        "Toast notifications for connection changes"
      ]
    }
  }
} 